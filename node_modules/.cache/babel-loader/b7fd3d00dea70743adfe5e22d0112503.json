{"ast":null,"code":"var _jsxFileName = \"/home/dumdum1100/react_tutor/demo_project/client/src/utils/MultiSelect.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { getList } from \"../services\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const MultiSelect = ({\n  LIST_NAME,\n  value,\n  callBack\n}) => {\n  _s();\n\n  const [show, setShow] = useState(false);\n  const [select, setSelect] = useState({\n    selected: [],\n    data: []\n  });\n  const wrapperRef = useRef(null);\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (wrapperRef.current && !wrapperRef.current.contains(event.target)) {\n        setShow(false);\n      }\n    }\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [wrapperRef]);\n  useEffect(() => {\n    const tableData = getList(LIST_NAME);\n    const data = tableData ? tableData.map(item => ({\n      name: item.name,\n      id: item.id\n    })) : [];\n\n    if (value) {\n      setSelect({\n        selected: value,\n        data\n      });\n    } else {\n      setSelect({\n        selected: [],\n        data\n      });\n    }\n  }, [value]);\n\n  const handleShow = () => {\n    setShow(!show);\n  };\n\n  const isSelected = item => {\n    let isExist = false;\n    const {\n      selected\n    } = select;\n\n    for (const current of selected) {\n      if (item.id === current.id) {\n        isExist = true;\n        break;\n      }\n    }\n\n    return isExist;\n  };\n\n  const handleSelect = item => {\n    if (!isSelected(item)) {\n      const newSelected = select.selected.map(value => value);\n      newSelected.push(item);\n      setSelect({ ...select,\n        selected: newSelected\n      });\n      callBack(newSelected);\n    } else {\n      const newSelected = select.selected.filter(value => value.id !== item.id);\n      setSelect({ ...select,\n        selected: newSelected\n      });\n      callBack(newSelected);\n    }\n  };\n\n  const handleDelete = (event, current) => {\n    event.stopPropagation();\n    let newSelected = select.selected.map(item => item);\n    newSelected = newSelected.filter(item => current.id !== item.id);\n    setSelect({ ...select,\n      selected: newSelected\n    });\n    callBack(newSelected);\n  };\n\n  const dropDownSelect = data => {\n    return data.length ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \" z-10 h-24 w-full max-w-xs overflow-scroll  overflow-x-hidden absolute rounded-md bg-white border-2 text-center\",\n      children: data.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: `p-2 pl-3 border-b border-gray-300  ${isSelected(item) ? \" bg-white text-blue-700\" : \"\"}`,\n        onClick: () => handleSelect(item),\n        children: item.name\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" z-10 w-full p-3  max-w-xs absolute rounded-md bg-white border-2\",\n      children: \"no data\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n  };\n\n  const {\n    selected,\n    data\n  } = select;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full relative  my-1 \",\n    ref: wrapperRef,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `border-2 py-0.5 h-11 flex bg-white\n          ${show ? \"border-2 border-gray-outlineFocus rounded-md \" : \" border-gray-outline rounded\"}\n          ${selected.length ? \" border-gray-outlineFocus\" : \"\"}`,\n      onClick: handleShow,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-hidden whitespace-nowrap flex flex-1\",\n        children: selected.length ? selected.map((item, index) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border text-md bg-blue-300 p-2 inline-block text-black mx-1  rounded-md\",\n            children: [item.name, /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pl-2 inline-block \",\n              onClick: event => handleDelete(event, item),\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-times\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 17\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-md-nl pl-2 p-1.5 text-gray-secondary rounded-md\",\n          children: `Chose ur ${LIST_NAME}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center px-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), show ? dropDownSelect(data) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MultiSelect, \"XdtdAoaAOpyiUa82xUJ3OOdC2s0=\");\n\n_c = MultiSelect;\nexport default MultiSelect;\n\nvar _c;\n\n$RefreshReg$(_c, \"MultiSelect\");","map":{"version":3,"sources":["/home/dumdum1100/react_tutor/demo_project/client/src/utils/MultiSelect.js"],"names":["React","useState","useEffect","useRef","getList","MultiSelect","LIST_NAME","value","callBack","show","setShow","select","setSelect","selected","data","wrapperRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","tableData","map","item","name","id","handleShow","isSelected","isExist","handleSelect","newSelected","push","filter","handleDelete","stopPropagation","dropDownSelect","length","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { getList } from \"../services\";\n\nexport const MultiSelect = ({ LIST_NAME, value, callBack }) => {\n  const [show, setShow] = useState(false);\n  const [select, setSelect] = useState({\n    selected: [],\n    data: [],\n  });\n  const wrapperRef = useRef(null);\n\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (wrapperRef.current && !wrapperRef.current.contains(event.target)) {\n        setShow(false);\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [wrapperRef]);\n\n  useEffect(() => {\n    const tableData = getList(LIST_NAME);\n    const data = tableData ? tableData.map(item => ({ name: item.name, id: item.id })) : [];\n    if (value) {\n      setSelect({ selected: value, data });\n    }\n    else {\n      setSelect({ selected: [], data });\n    }\n  }, [value]);\n\n  const handleShow = () => {\n    setShow(!show);\n  };\n\n  const isSelected = item => {\n    let isExist = false;\n    const { selected } = select;\n    for (const current of selected) {\n      if (item.id === current.id) {\n        isExist = true;\n        break;\n      }\n    }\n    return isExist;\n  };\n\n  const handleSelect = item => {\n    if (!isSelected(item)) {\n      const newSelected = select.selected.map(value => value);\n      newSelected.push(item);\n      setSelect({ ...select, selected: newSelected });\n      callBack(newSelected);\n    }\n    else {\n      const newSelected = select.selected.filter(value => value.id !== item.id);\n      setSelect({ ...select, selected: newSelected });\n      callBack(newSelected);\n    }\n  };\n\n  const handleDelete = (event, current) => {\n    event.stopPropagation();\n    let newSelected = select.selected.map(item => item);\n    newSelected = newSelected.filter(item => current.id !== item.id);\n    setSelect({ ...select, selected: newSelected });\n    callBack(newSelected);\n  };\n\n  const dropDownSelect = data => {\n    return data.length ? (\n      <ul\n        className=\" z-10 h-24 w-full max-w-xs overflow-scroll \n        overflow-x-hidden absolute rounded-md bg-white border-2 text-center\"\n      >\n        {data.map((item, index) => (\n          <li\n            className={`p-2 pl-3 border-b border-gray-300  ${\n              isSelected(item) ? \" bg-white text-blue-700\" : \"\"\n            }`}\n            onClick={() => handleSelect(item)}\n            key={index}\n          >\n        \n            {item.name}\n          </li>\n        ))}\n      </ul>\n    ) : (\n      <div className=\" z-10 w-full p-3  max-w-xs absolute rounded-md bg-white border-2\">\n        no data\n      </div>\n    );\n  };\n\n  const { selected, data } = select;\n\n  return (\n    <div className=\"w-full relative  my-1 \" ref={wrapperRef}>\n      <div\n        className={`border-2 py-0.5 h-11 flex bg-white\n          ${show ? \"border-2 border-gray-outlineFocus rounded-md \" : \" border-gray-outline rounded\"}\n          ${selected.length ? \" border-gray-outlineFocus\" : \"\"}`}\n        onClick={handleShow}\n      >\n        <div className=\"overflow-hidden whitespace-nowrap flex flex-1\">\n          {selected.length ? (\n            selected.map((item, index) => {\n              return (\n                <div\n                  key={index}\n                  className=\"border text-md bg-blue-300 p-2\n                  inline-block text-black mx-1  rounded-md\"\n                >\n                  {item.name}\n                  <div className=\"pl-2 inline-block \" onClick={event => handleDelete(event, item)}>\n                    <i className=\"fas fa-times\"></i>\n                  </div>\n                </div>\n              );\n            })\n          ) : (\n            <div className=\"text-md-nl pl-2 p-1.5 text-gray-secondary rounded-md\">\n              {`Chose ur ${LIST_NAME}`}\n            </div>\n          )}\n        </div>\n        <div className=\"flex items-center px-2\">\n        </div>\n      </div>\n      {show ? dropDownSelect(data) : null}\n    </div>\n  );\n};\n\nexport default MultiSelect;\n"]},"metadata":{},"sourceType":"module"}